
      <!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checkout — Premium Store</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    .checkout-container{max-width:1100px;margin:40px auto;padding:0 20px;display:grid;grid-template-columns:1fr 380px;gap:30px}
    .checkout-box{background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent);padding:20px;border-radius:14px}
    .form-group{margin-bottom:16px}
    .form-group label{display:block;font-size:14px;margin-bottom:4px;color:var(--muted)}
    .form-group input,textarea,select{width:100%;padding:12px;border-radius:8px;border:none;background:rgba(255,255,255,0.05);color:white;font-size:15px}
    .order-summary-item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid rgba(255,255,255,0.05)}
    .total-row{display:flex;justify-content:space-between;padding-top:15px;font-size:20px;font-weight:800;color:var(--accent)}
    .success-box{display:none;text-align:center;padding:20px;background:rgba(0,255,140,0.08);border-radius:12px;margin-top:20px}
  </style>
</head>
<body>
  <header class="header">
    <div class="container header-row">
      <div class="left">
        <button id="openSide" class="icon-btn"><i class="fa-solid fa-bars"></i></button>
      <div class="brand">PREMI<span class="accent">UM</span></div>
      </div>
      <nav class="main-nav">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="cart.html">Booking</a>
        <a href="contact.html">Contact</a>
      </nav>
      <div class="actions">
        <button class="btn ghost" onclick="location.href='login.html'">Log In</button>
        <button class="btn primary" onclick="location.href='signup.html'">Sign Up</button>
      </div>
    </div>
  </header>

  <main class="checkout-container">
    <form id="checkoutForm" class="checkout-box">
      <h2>Billing & Booking Details</h2>

      <div class="form-group"><label>Full Name</label><input required type="text" id="fullName" placeholder="John Doe"></div>
      <div class="form-group"><label>Email Address</label><input required type="email" id="email" placeholder="you@example.com"></div>
      <div class="form-group"><label>Phone Number</label><input required type="text" id="phone" placeholder="+92 300 1234567"></div>
      <div class="form-group"><label>Preferred Delivery / Booking Date (optional)</label><input type="date" id="preferredDate"></div>

      <h2 style="margin-top:25px">Shipping Address</h2>
      <div class="form-group"><label>Address</label><input required type="text" id="address" placeholder="House number, street"></div>
      <div class="form-group"><label>City</label><input required type="text" id="city" placeholder="City"></div>
      <div class="form-group"><label>Postal Code</label><input required type="text" id="postal" placeholder="Postal / ZIP code"></div>

      <button class="btn primary" style="margin-top:20px; width:100%" type="submit"><i class="fa-solid fa-lock"></i> Place Booking</button>

      <div class="success-box" id="successBox"><h3><i class="fa-solid fa-circle-check"></i> Booking Placed!</h3><p>Redirecting to confirmation…</p></div>
    </form>

    <aside class="checkout-box">
      <h2>Order Summary</h2>
      <div id="summaryList"></div>
      <div class="total-row"><div>Total</div><div id="summaryTotal">$0.00</div></div>
      <p class="small-muted" style="margin-top:8px">Note: This demo stores bookings locally only. For real orders integrate a backend or payment gateway.</p>
    </aside>
  </main>
<div class="footer-wrapper">
        © 2025 <span class="brand-name">Rameel Tanveer</span>. All Rights Reserved.
</div>

  <!-- JS -->
  <script>
    (function(){
      const CART_KEY = 'premium_cart_v2';
      const BOOKING_KEY = 'premium_bookings'; // new storage key for bookings

      // helper
      const $ = s => document.querySelector(s);
      const $all = s => Array.from(document.querySelectorAll(s));

      // set year
      const yearEl = document.getElementById('year');
      if(yearEl) yearEl.textContent = new Date().getFullYear();

      function loadCart(){
        try { return JSON.parse(localStorage.getItem(CART_KEY) || '{}'); } catch(e) { return {}; }
      }
      function compute(cart){
        const items = Object.values(cart);
        const total = items.reduce((s,i) => s + (i.qty * i.price), 0);
        return { items, total };
      }

      function renderSummary(){
        const cart = loadCart();
        const { items, total } = compute(cart);
        const summaryList = document.getElementById('summaryList');
        const summaryTotal = document.getElementById('summaryTotal');
        if(!summaryList || !summaryTotal) return;
        if(items.length === 0){
          summaryList.innerHTML = '<p class="small-muted">Your cart is empty.</p>';
          summaryTotal.textContent = '$0.00';
          return;
        }
        summaryList.innerHTML = items.map(it => `
          <div class="order-summary-item">
            <span>${it.name} × ${it.qty}</span>
            <span>$${(it.qty*it.price).toFixed(2)}</span>
          </div>
        `).join('');
        summaryTotal.textContent = `$${total.toFixed(2)}`;
      }

      renderSummary();

      // Booking logic on submit
      const form = document.getElementById('checkoutForm');
      const successBox = document.getElementById('successBox');

      form.addEventListener('submit', function(e){
        e.preventDefault();

        const cart = loadCart();
        const { items, total } = compute(cart);
        if(items.length === 0){
          alert('Your cart is empty. Add items before placing booking.');
          return;
        }

        // gather form values
        const data = {
          id: 'BKG-' + Date.now(),
          createdAt: (new Date()).toISOString(),
          customer: {
            name: document.getElementById('fullName').value.trim(),
            email: document.getElementById('email').value.trim(),
            phone: document.getElementById('phone').value.trim(),
            address: document.getElementById('address').value.trim(),
            city: document.getElementById('city').value.trim(),
            postal: document.getElementById('postal').value.trim(),
            preferredDate: document.getElementById('preferredDate').value || null
          },
          items: items,
          total: total
        };

        // save booking to localStorage (array)
        try {
          const raw = localStorage.getItem(BOOKING_KEY) || '[]';
          const list = JSON.parse(raw);
          list.push(data);
          localStorage.setItem(BOOKING_KEY, JSON.stringify(list));
        } catch (err) {
          console.error('Failed to save booking', err);
        }

        // clear the cart
        localStorage.removeItem(CART_KEY);

        // show success and redirect to confirmation with id
        successBox.style.display = 'block';
        setTimeout(() => {
          location.href = `booking-confirmation.html?id=${encodeURIComponent(data.id)}`;
        }, 900);
      });

    })();
  </script>
</body>
</html>
